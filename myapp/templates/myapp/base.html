{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}ScrapSort{% endblock %}</title>
  <style>
    :root { --bg:#ffffff; --muted:#4b5563; --text:#111827; --accent:#16a34a; }
    *{box-sizing:border-box}
    body{margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; background:#ffffff; color:var(--text); min-height:100vh;}
    html{ scroll-behavior: smooth }
    a{color:inherit; text-decoration:none}
    .container{width:100%; max-width:1100px; margin:0 auto; padding:24px;}

    /* Navbar */
    .navbar{position:sticky; top:0; z-index:50; background:linear-gradient(135deg,#16a34a,#15803d); box-shadow:0 2px 8px rgba(0,0,0,.08)}
    .nav-inner{max-width:1100px; margin:0 auto; padding:18px 24px; display:flex; align-items:center; justify-content:space-between}
    .brand{display:flex; align-items:center; gap:10px}
    .logo{width:56px;height:56px;border-radius:50px;object-fit:cover}
    .brand-title{font-weight:800; letter-spacing:.02em; color:#ffffff}
    .nav-links{display:flex; gap:14px; flex-wrap:wrap}
    .nav-link{padding:8px 12px; border-radius:10px; color:#f8fafc; transition:background-color .2s ease, color .2s ease}
    .nav-link:hover{background:rgba(255,255,255,.16); color:#ffffff}
    .nav-link.active{background:rgba(255,255,255,.24); color:#ffffff; font-weight:700}

    .content{padding:20px 0}
    /* Home hero - horizontal slider (centered hero style) */
    .hero{ position:relative; width:100%; height:100vh; overflow:hidden; display:flex; }
    @media (max-width: 768px){ .hero{ height:100vh } }
    .slider{ position:relative; width:100%; height:100%; display:flex; align-items:center; }
    .slides{ display:flex; width:200%; height:100%; transform: translateX(0); transition: transform .7s ease; }
    .slide{ flex: 0 0 100%; height:100%; }
    .slide img{ width:100%; height:100%; object-fit:cover; object-position:center; display:block; border-radius:0; }
    /* first image fade-in on load */
    .slide:first-child img{ opacity:.5; animation: heroFade 1.5s ease-out forwards }
    @keyframes heroFade{ 0%{opacity:.5} 100%{opacity:1} }

    /* slider buttons */
    .slider-btn{ position:absolute; top:50%; transform:translateY(-50%); z-index:5; background:rgba(17,24,39,.55); color:#fff; border:none; padding:10px 12px; border-radius:8px; cursor:pointer; backdrop-filter: blur(4px);}
    .slider-btn:hover{ background:rgba(17,24,39,.75) }
    .slider-btn.prev{ left:14px }
    .slider-btn.next{ right:14px }

    /* About section below slider */
    .about-section{ background:#d1fae5; color:#0a1a2b; }
    .about-inner{ max-width:1100px; margin:0 auto; padding:48px 24px; display:grid; grid-template-columns: 1.2fr 0.8fr; gap:28px; align-items:center }
    @media (max-width: 900px){ .about-inner{ grid-template-columns: 1fr; } }
    .about-title{ font-size: clamp(28px, 4vw, 40px); font-weight: 800; margin:0 0 10px 0 }
    .about-text{ font-size: clamp(16px, 1.6vw, 18px); line-height:1.6; margin:0 0 18px 0 }
    .about-image{ width:100%; height:auto; display:block; border-radius:0; object-fit:cover }
    .btn-primary{ display:inline-block; padding:12px 18px; background:#15803d; color:#ffffff; border-radius:10px; font-weight:700; transition: background .2s ease, transform .1s ease; }
    .btn-primary:hover{ background:#166534 }
    .btn-primary:active{ transform: translateY(1px) }

    /* Footer */
    .footer{ background:linear-gradient(135deg,#16a34a,#15803d); color:#ffffff; margin-top:40px }
    .footer-inner{ max-width:1100px; margin:0 auto; padding:24px; display:flex; flex-wrap:wrap; gap:16px; align-items:center; justify-content:space-between }
    .footer small{ opacity:.9 }
    .footer a{ color:#ffffff; text-decoration:underline; }
  </style>
  {% block head %}{% endblock %}
</head>
<body>
  <nav class="navbar">
    <div class="nav-inner">
      <div class="brand">
        <img class="logo" src="/media/logo.avif" alt="ScrapSort logo" />
        <div class="brand-title">ScrapSort</div>
      </div>
      <div class="nav-links">
        <a class="nav-link{% if request.resolver_match.url_name == 'home' %} active{% endif %}" href="{% url 'home' %}">Home</a>
        <a class="nav-link{% if request.resolver_match.url_name == 'scrap_price' %} active{% endif %}" href="{% url 'scrap_price' %}">Scrap Price</a>
        <a class="nav-link{% if request.resolver_match.url_name == 'nearest_dump' %} active{% endif %}" href="{% url 'nearest_dump' %}">Nearest dump</a>
        <a class="nav-link{% if request.resolver_match.url_name == 'faq' %} active{% endif %}" href="{% url 'faq' %}">FAQ</a>
        <a class="nav-link" href="/#about">About</a>
        <a class="nav-link{% if request.resolver_match.url_name == 'contact' %} active{% endif %}" href="{% url 'contact' %}">Contact us</a>
      </div>
    </div>
  </nav>

  {% if request.resolver_match.url_name == 'home' %}
    <div class="hero">
      <div class="slider" id="hero-slider">
        <div class="slides">
          <div class="slide"><img src="/media/slide1.png" alt="ScrapSort - slide 1" /></div>
          <div class="slide"><img src="/media/image2.webp" alt="ScrapSort - slide 2" /></div>
        </div>
        <button class="slider-btn next" aria-label="Next slide">&#10095;</button>
      </div>
    </div>
    <script>
      (function(){
        const slider = document.getElementById('hero-slider');
        if(!slider) return;
        const slidesEl = slider.querySelector('.slides');
        let slides = slider.querySelectorAll('.slide');
        // Clone first slide to end for seamless leftward loop
        const firstClone = slides[0].cloneNode(true);
        slidesEl.appendChild(firstClone);
        slides = slider.querySelectorAll('.slide');
        const total = slides.length; // includes clone
        let idx = 0;
        const setTransform = () => { slidesEl.style.transform = `translateX(-${idx*100}%)`; };
        const enableTransition = () => { slidesEl.style.transition = 'transform .7s ease'; };
        const disableTransition = () => { slidesEl.style.transition = 'none'; };

        function goNext(){
          enableTransition();
          idx += 1; // always move forward (left)
          setTransform();
        }

        // Wrap when reaching the clone to keep forward motion
        slidesEl.addEventListener('transitionend', () => {
          if(idx === total - 1){
            disableTransition();
            idx = 0;
            setTransform();
            // force reflow before re-enabling transition
            void slidesEl.offsetWidth;
            enableTransition();
          }
        });

        const nextBtn = slider.querySelector('.next');
        if(nextBtn) nextBtn.addEventListener('click', goNext);
        // Auto-advance infinitely every 3 seconds
        setInterval(goNext, 3000);
      })();
    </script>
  {% endif %}

  <main class="content container">
    {% block content %}{% endblock %}
  </main>

  <!-- About section moved below main -->
  <section id="about" class="about-section" style="margin-bottom:0">
    <div class="about-inner">
      <div class="about-left">
        <h2 class="about-title">What is ScrapSort?</h2>
        <p class="about-text">ScrapSort is a smart digital waste management web app that detects waste using AI and classifies it into categories such as recyclable, organic, e-waste, and general waste. It provides eco-friendly solutions for managing each type while allowing users to compare real-time scrap prices per kilogram across multiple platforms, helping them get the best value for their recyclables. The app also shows the nearest dump yards and recycling centers, making it easier for individuals and businesses to dispose of waste responsibly. For bulk waste disposal measured in tons, ScrapSort offers location-based options to connect with collection centers. A user-friendly dashboard tracks waste history, earnings, and eco-impact, encouraging sustainable practices. By combining detection, price comparison, and disposal guidance, ScrapSort makes waste management digital, profitable, and sustainable.

        </p>
        <h1 style="color:green">“ScrapSort – Turning Waste into Value, Digitally and Sustainably.”</h1>
        <a href="/upload/#upload" class="btn-primary">Try ScrapSort</a>
      </div>
      <div class="about-right">
        <img class="about-image" src="/media/image1.jpg" alt="ScrapSort overview" />
      </div>
    </div>
  </section>

  <footer class="footer" style="margin-top:0">
    <div class="footer-inner">
      <div style="display:flex; align-items:center; gap:10px">
        <img class="logo" src="/media/logo.avif" alt="ScrapSort logo" style="width:40px;height:40px;border-radius:50%" />
        <strong>ScrapSort</strong>
      </div>
      <small>© {% now "Y" %} ScrapSort. All rights reserved.</small>
      <div style="max-width:700px; line-height:1.6">
        <small>
          ScrapSort helps you identify waste types and suggests the safest, most sustainable next steps.
          We combine computer vision with curated guidance to reduce contamination and increase recycling effectiveness.
          Always follow your local municipality rules.
        </small>
      </div>
      <div class="social" style="display:flex; gap:14px; align-items:center; margin-top:8px">
        <a href="mailto:hello@scrapsort.app" aria-label="Email" title="Email" style="color:#fff">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z" stroke="currentColor" stroke-width="1.6"/>
            <path d="M22 6l-10 7L2 6" stroke="currentColor" stroke-width="1.6"/>
          </svg>
        </a>
        <a href="https://facebook.com" target="_blank" rel="noopener" aria-label="Facebook" title="Facebook" style="color:#fff">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M22 12.07C22 6.48 17.52 2 11.93 2S2 6.48 2 12.07c0 5.02 3.66 9.19 8.44 9.98v-7.06H7.9v-2.92h2.54V9.41c0-2.5 1.49-3.89 3.77-3.89 1.09 0 2.23.2 2.23.2v2.45h-1.25c-1.24 0-1.63.77-1.63 1.56v1.87h2.78l-.44 2.92h-2.34v7.06C18.34 21.26 22 17.09 22 12.07z" />
          </svg>
        </a>
        <a href="https://instagram.com" target="_blank" rel="noopener" aria-label="Instagram" title="Instagram" style="color:#fff">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="3" y="3" width="18" height="18" rx="5" stroke="currentColor" stroke-width="1.6"/>
            <circle cx="12" cy="12" r="3.5" stroke="currentColor" stroke-width="1.6"/>
            <circle cx="17.5" cy="6.5" r="1" fill="currentColor"/>
          </svg>
        </a>
      </div>
    </div>
  </footer>
</body>
</html>
